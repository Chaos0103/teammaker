<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <title>SSAFY Students</title>
</head>
<body>
<div class="container border p-5">
    <h1>인원 명단</h1>
    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">이름</th>
            <th scope="col">삭제</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="student : ${students}">
            <th scope="row" th:text="${student.id}">1</th>
            <td th:text="${student.name}">김싸피</td>
            <td>
                <a href="#" th:href="'javascript:remove('+${student.id}+')'" class="btn btn-danger">삭제</a>
            </td>
        </tr>
        </tbody>
    </table>
    <a href="#" th:href="'javascript:clear()'" class="btn btn-danger">전체삭제</a>
</div>
</body>
<script>
    function remove(id) {
        const form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", "/students/" + id + "/remove");
        document.body.appendChild(form);
        form.submit();
    }

    function clear() {
        const form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", "/students/clear");
        document.body.appendChild(form);
        form.submit();
    }
</script>
</html>